### 说明

引入了JSON反序列化工具，并在请求处理前将request body 转换为对应的泛型类。

introduce a tool of deserializing JSON, and convert the request body before using the handler to handle the request

```java
public class WebClient{
    private static Class<?> getRequestClass(RequestHandler requestHandler) {
        // RequestHandler的实现类会用泛型指定Request Body 对应的接收参数，因此我们可以在这里通过反射获取到这个参数的类型
        // the RequestHandler will specify the type used to receive the request body. and we can use reflection to know the class of the generic type
        Class<?> requestClz = Void.class;
        Type[] requestInterfaces = requestHandler.getClass().getGenericInterfaces();
        for (Type requestInterface : requestInterfaces) {
            if (requestInterface instanceof ParameterizedType){
                ParameterizedType parameterizedType = (ParameterizedType) requestInterface;
                if (parameterizedType.getRawType() == RequestHandler.class){
                    Type[] actualTypeArguments = parameterizedType.getActualTypeArguments();
                    if(actualTypeArguments.length > 0){
                        requestClz = (Class<?>) actualTypeArguments[0];
                    }
                }
            }
        }
        return requestClz;
    }
    private void handleRequest(Socket accept) throws IOException {
//        省略细节 / detail omitted
        RequestHandler requestHandler = matchResult.requestHandler;
        Class<?> requestClz = getRequestClass(requestHandler);
        if(requestClz != Void.class){
            Object requestBody = Bson.deserialize(rawBody, new TypeReference(requestClz));
            request.setBody(requestBody);
        }
        Object responseBody = requestHandler.doHandle(request);
//        省略细节 / detail omitted
    }
}
//  这样，在具体的handler中，我们就可以直接获取指定泛型的request body了
public class LoginHandler implements RequestHandler<Login> {
    Map<String, String> mockDatabase = new HashMap<>();
    {
        mockDatabase.put("administrator","13157");
        mockDatabase.put("Boojux","oYeah");
        mockDatabase.put("workerA","fdaw3@2");
        mockDatabase.put("张玉辉","dadwa");
    }
    @Override
    public Object doHandle(HttpRequest<Login> httpRequest) {
        Login body = httpRequest.getBody();
        if (StringUtils.equals(body.getPassword(), mockDatabase.get(body.getUsername()))){
            return "succeed!";
        }else{
            return "fail!";
        }
    }

    @Override
    public String getUrl() {
        return "/login";
    }

    @Override
    public String getType() {
        return HTTPEnum.POST.type;
    }
}

```